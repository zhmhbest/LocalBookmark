<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>加密</title>
        <link rel='stylesheet' href='../../common/css/bootstrap.min.css'>
        <script src="lib/CryptoJS/v3.1.2/components/core-min.js"></script>
        <script src="lib/CryptoJS/v3.1.2/components/x64-core-min.js"></script>

        <script src="lib/CryptoJS/v3.1.2/rollups/aes.js"></script>
        <script src="lib/CryptoJS/v3.1.2/rollups/tripledes.js"></script>
        <script src="lib/CryptoJS/v3.1.2/rollups/rc4.js"></script>
        <script src="lib/CryptoJS/v3.1.2/rollups/rabbit.js"></script>
    </head>

    <body><div class='container'>
        <br/><h2>加密</h2><br/>
        <input type="text" class="form-control" id="c_text" placeholder="待 加密 字符">
        <input type="text" class="form-control" id="c_key" placeholder="Key"><br/>

        <label for="text">AES:</label>
        <input type="text" class="form-control" id="c_aes" placeholder="待解码字符" /><br/>
        <label for="text">DES:</label>
        <input type="text" class="form-control" id="c_des" placeholder="待解码字符" /><br/>
        <label for="text">RC4:</label>
        <input type="text" class="form-control" id="c_rc4" placeholder="待解码字符" /><br/>
        <label for="text">Rabbit:</label>
        <input type="text" class="form-control" id="c_rabb" placeholder="待解码字符" /><br/>
        <label for="text">TripleDES:</label>
        <input type="text" class="form-control" id="c_tdes" placeholder="待解码字符" /><br/>

        <script>

            c_key.onchange = function() {
                var str = c_text.value;
                var key = c_key.value;
                //全非空
                var isNotNull = new Array(c_aes.value!=null, c_des.value!=null, c_rc4.value!=null, c_rabb.value!=null, c_tdes.value!=null);
                var isNotAllNull = isNotNull[0] && isNotNull[1] && isNotNull[2] && isNotNull[3] && isNotNull[4];
                if( str && isNotAllNull) {
                    //编码
                    c_aes.value = CryptoJS.AES.encrypt(str, key);
                    c_des.value = CryptoJS.DES.encrypt(str, key);
                    c_rc4.value = CryptoJS.RC4.encrypt(str, key);
                    c_rabb.value = CryptoJS.Rabbit.encrypt(str, key);
                    c_tdes.value = CryptoJS.TripleDES.encrypt(str, key);
                } else {
                    //解码
                    if(isNotNull[0]) {
                        c_aes.onchange();
                    } else if(isNotNull[1]) {
                        c_des.onchange();
                    } else if(isNotNull[2]) {
                        c_rc4.onchange();
                    } else if(isNotNull[3]) {
                        c_rabb.onchange();
                    } else if(isNotNull[4]) {
                        c_tdes.onchange();
                    }
                }
            }
            c_text.onchange = function() {
                var str = c_text.value;
                var key = c_key.value;
                if(str) {
                    c_aes.value = CryptoJS.AES.encrypt(str, key);
                    c_des.value = CryptoJS.DES.encrypt(str, key);
                    c_rc4.value = CryptoJS.RC4.encrypt(str, key);
                    c_rabb.value = CryptoJS.Rabbit.encrypt(str, key);
                    c_tdes.value = CryptoJS.TripleDES.encrypt(str, key);
                } else {
                    c_aes.value =
                    c_des.value =
                    c_rc4.value =
                    c_rabb.value =
                    c_tdes.value = "";
                    return;
                }
            }
            c_aes.onchange = function() {
                //c_aes.value =
                c_des.value =
                c_rc4.value =
                c_rabb.value =
                c_tdes.value = "";
                try {
                    c_text.value = CryptoJS.AES.decrypt(c_aes.value, c_key.value).toString(CryptoJS.enc.Utf8);
                } catch(err) {
                    c_text.value = "";
                    console.error(err); //err.message
                    alert("输入的 AES Code 错误！");
                }
            }
            c_des.onchange = function() {
                c_aes.value =
                //c_des.value =
                c_rc4.value =
                c_rabb.value =
                c_tdes.value = "";
                try {
                    c_text.value = CryptoJS.DES.decrypt(c_des.value, c_key.value).toString(CryptoJS.enc.Utf8);
                } catch(err) {
                    c_text.value = "";
                    console.error(err); //err.message
                    alert("输入的 DES Code 错误！");
                }
            }
            c_rc4.onchange = function() {
                c_aes.value =
                c_des.value =
                //c_rc4.value =
                c_rabb.value =
                c_tdes.value = "";
                try {
                    c_text.value = CryptoJS.RC4.decrypt(c_rc4.value, c_key.value).toString(CryptoJS.enc.Utf8);
                } catch(err) {
                    c_text.value = "";
                    console.error(err); //err.message
                    alert("输入的 RC4 Code 错误！");
                }
            }
            c_rabb.onchange = function() {
                c_aes.value =
                c_des.value =
                c_rc4.value =
                //c_rabb.value =
                c_tdes.value = "";
                try {
                    c_text.value = CryptoJS.Rabbit.decrypt(c_rabb.value, c_key.value).toString(CryptoJS.enc.Utf8);
                } catch(err) {
                    c_text.value = "";
                    console.error(err); //err.message
                    alert("输入的 Rabbit Code 错误！");
                }
            }
            c_tdes.onchange = function() {
                c_aes.value =
                c_des.value =
                c_rc4.value =
                c_rabb.value = "";
                //c_tdes.value = "";
                try {
                    c_text.value = CryptoJS.TripleDES.decrypt(c_tdes.value, c_key.value).toString(CryptoJS.enc.Utf8);
                } catch(err) {
                    c_text.value = "";
                    console.error(err); //err.message
                    alert("输入的 TripleDES Code 错误！");
                }
            }
        </script>
    </div></body>
</html>